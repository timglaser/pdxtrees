/* wax - 7.0.0dev10 - v6.0.4-99-gbe8ba88 */
!function(e,t,n){if(typeof module!=="undefined")module.exports=n(e,t);else if(typeof define==="function"&&typeof define.amd==="object")define(n);else t[e]=n(e,t)}("bean",this,function(e,t){var n=window,r=t[e],i=/over|out/,s=/[^\.]*(?=\..*)\.|.*/,o=/\..*/,u="addEventListener",a="attachEvent",f="removeEventListener",l="detachEvent",c=document||{},h=c.documentElement||{},p=h[u],d=p?u:a,v=Array.prototype.slice,m=/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,g=/mouse.*(wheel|scroll)/i,y=/^text/i,b=/^touch|^gesture/i,w={one:1},E=function(e,t,n){for(n=0;n<t.length;n++)e[t[n]]=1;return e}({},("click dblclick mouseup mousedown contextmenu "+"mousewheel mousemultiwheel DOMMouseScroll "+"mouseover mouseout mousemove selectstart selectend "+"keydown keypress keyup "+"orientationchange "+"focus blur change reset select submit "+"load unload beforeunload resize move DOMContentLoaded readystatechange "+"error abort scroll "+(p?"show "+"input invalid "+"touchstart touchmove touchend touchcancel "+"gesturestart gesturechange gestureend "+"message readystatechange pageshow pagehide popstate "+"hashchange offline online "+"afterprint beforeprint "+"dragstart dragenter dragover dragleave drag drop dragend "+"loadstart progress suspend emptied stalled loadmetadata "+"loadeddata canplay canplaythrough playing waiting seeking "+"seeked ended durationchange timeupdate play pause ratechange "+"volumechange cuechange "+"checking noupdate downloading cached updateready obsolete "+"":"")).split(" ")),S=function(){function e(e,t){while((t=t.parentNode)!==null){if(t===e)return true}return false}function t(t){var n=t.relatedTarget;if(!n)return n===null;return n!==this&&n.prefix!=="xul"&&!/document/.test(this.toString())&&!e(this,n)}return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),x=function(){var e="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),t=e.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),n=t.concat("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis".split(" ")),r=e.concat("char charCode key keyCode keyIdentifier keyLocation".split(" ")),s=e.concat(["data"]),o=e.concat("touches targetTouches changedTouches scale rotation".split(" ")),u="preventDefault",a=function(e){return function(){if(e[u])e[u]();else e.returnValue=false}},f="stopPropagation",l=function(e){return function(){if(e[f])e[f]();else e.cancelBubble=true}},p=function(e){return function(){e[u]();e[f]();e.stopped=true}},d=function(e,t,n){var r,i;for(r=n.length;r--;){i=n[r];if(!(i in t)&&i in e)t[i]=e[i]}};return function(v,w){var E={originalEvent:v,isNative:w};if(!v)return E;var S,x=v.type,T=v.target||v.srcElement;E[u]=a(v);E[f]=l(v);E.stop=p(E);E.target=T&&T.nodeType===3?T.parentNode:T;if(w){if(x.indexOf("key")!==-1){S=r;E.keyCode=v.which||v.keyCode}else if(m.test(x)){S=t;E.rightClick=v.which===3||v.button===2;E.pos={x:0,y:0};if(v.pageX||v.pageY){E.clientX=v.pageX;E.clientY=v.pageY}else if(v.clientX||v.clientY){E.clientX=v.clientX+c.body.scrollLeft+h.scrollLeft;E.clientY=v.clientY+c.body.scrollTop+h.scrollTop}if(i.test(x))E.relatedTarget=v.relatedTarget||v[(x==="mouseover"?"from":"to")+"Element"]}else if(b.test(x)){S=o}else if(g.test(x)){S=n}else if(y.test(x)){S=s}d(v,E,S||e)}return E}}(),T=function(e,t){return!p&&!t&&(e===c||e===n)?h:e},N=function(){function e(e,t,n,r,i){this.element=e;this.type=t;this.handler=n;this.original=r;this.namespaces=i;this.custom=S[t];this.isNative=E[t]&&e[d];this.eventType=p||this.isNative?t:"propertychange";this.customType=!p&&!this.isNative&&t;this.target=T(e,this.isNative);this.eventSupport=this.target[d]}e.prototype={inNamespaces:function(e){var t,n;if(!e)return true;if(!this.namespaces)return false;for(t=e.length;t--;){for(n=this.namespaces.length;n--;){if(e[t]===this.namespaces[n])return true}}return false},matches:function(e,t,n){return this.element===e&&(!t||this.original===t)&&(!n||this.handler===n)}};return e}(),C=function(){var e={},t=function(n,r,i,s,o){if(!r||r==="*"){for(var u in e){if(u.charAt(0)==="$")t(n,u.substr(1),i,s,o)}}else{var a=0,f,l=e["$"+r],c=n==="*";if(!l)return;for(f=l.length;a<f;a++){if(c||l[a].matches(n,i,s))if(!o(l[a],l,a,r))return}}},n=function(t,n,r){var i,s=e["$"+n];if(s){for(i=s.length;i--;){if(s[i].matches(t,r,null))return true}}return false},r=function(e,n,r){var i=[];t(e,n,r,null,function(e){return i.push(e)});return i},i=function(t){(e["$"+t.type]||(e["$"+t.type]=[])).push(t);return t},s=function(n){t(n.element,n.type,null,n.handler,function(t,n,r){n.splice(r,1);if(n.length===0)delete e["$"+t.type];return false})},o=function(){var t,n=[];for(t in e){if(t.charAt(0)==="$")n=n.concat(e[t])}return n};return{has:n,get:r,put:i,del:s,entries:o}}(),k=p?function(e,t,n,r){e[r?u:f](t,n,false)}:function(e,t,n,r,i){if(i&&r&&e["_on"+i]===null)e["_on"+i]=0;e[r?a:l]("on"+t,n)},L=function(e,t,r){return function(i){i=x(i||((this.ownerDocument||this.document||this).parentWindow||n).event,true);return t.apply(e,[i].concat(r))}},A=function(e,t,r,i,s,o){return function(u){if(i?i.apply(this,arguments):p?true:u&&u.propertyName==="_on"+r||!u){if(u)u=x(u||((this.ownerDocument||this.document||this).parentWindow||n).event,o);t.apply(e,u&&(!s||s.length===0)?arguments:v.call(arguments,u?0:1).concat(s))}}},O=function(e,t,n,r,i){return function(){e(t,n,i);r.apply(this,arguments)}},M=function(e,t,n,r){var i,s,u,a=t&&t.replace(o,""),f=C.get(e,a,n);for(i=0,s=f.length;i<s;i++){if(f[i].inNamespaces(r)){if((u=f[i]).eventSupport)k(u.target,u.eventType,u.handler,false,u.type);C.del(u)}}},_=function(e,t,n,r,i){var u,a=t.replace(o,""),f=t.replace(s,"").split(".");if(C.has(e,a,n))return e;if(a==="unload")n=O(M,e,a,n,r);if(S[a]){if(S[a].condition)n=A(e,n,a,S[a].condition,true);a=S[a].base||a}u=C.put(new N(e,a,n,r,f[0]&&f));u.handler=u.isNative?L(e,u.handler,i):A(e,u.handler,a,false,i,false);if(u.eventSupport)k(u.target,u.eventType,u.handler,true,u.customType)},D=function(e,t,n){return function(r){var i,s,o=typeof e==="string"?n(e,this):e;for(i=r.target;i&&i!==this;i=i.parentNode){for(s=o.length;s--;){if(o[s]===i){return t.apply(i,arguments)}}}}},P=function(e,t,n){var r,i,u,a,f,l=M,c=t&&typeof t==="string";if(c&&t.indexOf(" ")>0){t=t.split(" ");for(f=t.length;f--;)P(e,t[f],n);return e}u=c&&t.replace(o,"");if(u&&S[u])u=S[u].type;if(!t||c){if(a=c&&t.replace(s,""))a=a.split(".");l(e,u,n,a)}else if(typeof t==="function"){l(e,null,t)}else{for(r in t){if(t.hasOwnProperty(r))P(e,r,t[r])}}return e},H=function(e,t,n,r,i){var s,o,u,a,f=n,l=n&&typeof n==="string";if(t&&!n&&typeof t==="object"){for(s in t){if(t.hasOwnProperty(s))H.apply(this,[e,s,t[s]])}}else{a=arguments.length>3?v.call(arguments,3):[];o=(l?n:t).split(" ");l&&(n=D(t,f=r,i))&&(a=v.call(a,1));this===w&&(n=O(P,e,t,n,f));for(u=o.length;u--;)_(e,o[u],n,f,a)}return e},B=function(){return H.apply(w,arguments)},j=p?function(e,t,r){var i=c.createEvent(e?"HTMLEvents":"UIEvents");i[e?"initEvent":"initUIEvent"](t,true,true,n,1);r.dispatchEvent(i)}:function(e,t,n){n=T(n,e);e?n.fireEvent("on"+t,c.createEventObject()):n["_on"+t]++},F=function(e,t,n){var r,i,u,a,f,l=t.split(" ");for(r=l.length;r--;){t=l[r].replace(o,"");if(a=l[r].replace(s,""))a=a.split(".");if(!a&&!n&&e[d]){j(E[t],t,e)}else{f=C.get(e,t);n=[false].concat(n);for(i=0,u=f.length;i<u;i++){if(f[i].inNamespaces(a))f[i].handler.apply(e,n)}}}return e},I=function(e,t,n){var r=0,i=C.get(t,n),s=i.length;for(;r<s;r++)i[r].original&&H(e,i[r].type,i[r].original);return e},q={add:H,one:B,remove:P,clone:I,fire:F,noConflict:function(){t[e]=r;return this}};if(n[a]){var R=function(){var e,t=C.entries();for(e in t){if(t[e].type&&t[e].type!=="unload")P(t[e].element,t[e].type)}n[l]("onunload",R);n.CollectGarbage&&n.CollectGarbage()};n[a]("onunload",R)}return q});var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10};html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128};html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,nobr:0,noembed:4,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0};html4.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2};html4.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"body::background":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0};html4.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0};html4.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"body::background":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2};var html=function(e){function o(e){e=t(e);if(n.hasOwnProperty(e)){return n[e]}var r=e.match(i);if(r){return String.fromCharCode(parseInt(r[1],10))}else if(!!(r=e.match(s))){return String.fromCharCode(parseInt(r[1],16))}return""}function u(e,t){return o(t)}function f(e){return e.replace(a,"")}function c(e){return e.replace(l,u)}function y(e){return e.replace(h,"&").replace(d,"<").replace(v,">").replace(m,"&#34;").replace(g,"&#61;")}function b(e){return e.replace(p,"&$1").replace(d,"<").replace(v,">")}function S(n){return function(i,s){i=String(i);var o=null;var u=false;var a=[];var l=void 0;var h=void 0;var p=void 0;if(n.startDoc){n.startDoc(s)}while(i){var d=i.match(u?w:E);i=i.substring(d[0].length);if(u){if(d[1]){var v=t(d[1]);var m;if(d[2]){var g=d[3];switch(g.charCodeAt(0)){case 34:case 39:g=g.substring(1,g.length-1);break}m=c(f(g))}else{m=v}a.push(v,m)}else if(d[4]){if(h!==void 0){if(p){if(n.startTag){n.startTag(l,a,s)}}else{if(n.endTag){n.endTag(l,s)}}}if(p&&h&(e.eflags.CDATA|e.eflags.RCDATA)){if(o===null){o=t(i)}else{o=o.substring(o.length-i.length)}var y=o.indexOf("</"+l);if(y<0){y=i.length}if(y){if(h&e.eflags.CDATA){if(n.cdata){n.cdata(i.substring(0,y),s)}}else if(n.rcdata){n.rcdata(b(i.substring(0,y)),s)}i=i.substring(y)}}l=h=p=void 0;a.length=0;u=false}}else{if(d[1]){if(n.pcdata){n.pcdata(d[0],s)}}else if(d[3]){p=!d[2];u=true;l=t(d[3]);h=e.ELEMENTS.hasOwnProperty(l)?e.ELEMENTS[l]:void 0}else if(d[4]){if(n.pcdata){n.pcdata(d[4],s)}}else if(d[5]){if(n.pcdata){var S=d[5];n.pcdata(S==="<"?"<":S===">"?">":"&",s)}}}}if(n.endDoc){n.endDoc(s)}}}function x(t){var n;var r;return S({startDoc:function(e){n=[];r=false},startTag:function(i,s,o){if(r){return}if(!e.ELEMENTS.hasOwnProperty(i)){return}var u=e.ELEMENTS[i];if(u&e.eflags.FOLDABLE){return}else if(u&e.eflags.UNSAFE){r=!(u&e.eflags.EMPTY);return}s=t(i,s);if(s){if(!(u&e.eflags.EMPTY)){n.push(i)}o.push("<",i);for(var a=0,f=s.length;a<f;a+=2){var l=s[a],c=s[a+1];if(c!==null&&c!==void 0){o.push(" ",l,'="',y(c),'"')}}o.push(">")}},endTag:function(t,i){if(r){r=false;return}if(!e.ELEMENTS.hasOwnProperty(t)){return}var s=e.ELEMENTS[t];if(!(s&(e.eflags.UNSAFE|e.eflags.EMPTY|e.eflags.FOLDABLE))){var o;if(s&e.eflags.OPTIONAL_ENDTAG){for(o=n.length;--o>=0;){var u=n[o];if(u===t){break}if(!(e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG)){return}}}else{for(o=n.length;--o>=0;){if(n[o]===t){break}}}if(o<0){return}for(var a=n.length;--a>o;){var u=n[a];if(!(e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG)){i.push("</",u,">")}}n.length=o;i.push("</",t,">")}},pcdata:function(e,t){if(!r){t.push(e)}},rcdata:function(e,t){if(!r){t.push(e)}},cdata:function(e,t){if(!r){t.push(e)}},endDoc:function(e){for(var t=n.length;--t>=0;){e.push("</",n[t],">")}n.length=0}})}function N(t,n,i){var s=[];x(function(s,o){for(var u=0;u<o.length;u+=2){var a=o[u];var f=o[u+1];var l=null,c;if((c=s+"::"+a,e.ATTRIBS.hasOwnProperty(c))||(c="*::"+a,e.ATTRIBS.hasOwnProperty(c))){l=e.ATTRIBS[c]}if(l!==null){switch(l){case e.atype.NONE:break;case e.atype.SCRIPT:case e.atype.STYLE:f=null;break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:f=i?i(f):f;break;case e.atype.URI:var h=(""+f).match(T);if(!h){f=null}else if(!h[1]||r.test(h[1])){f=n&&n(f)}else{f=null}break;case e.atype.URI_FRAGMENT:if(f&&"#"===f.charAt(0)){f=i?i(f):f;if(f){f="#"+f}}else{f=null}break;default:f=null;break}}else{f=null}o[u+1]=f}return o})(t,s);return s.join("")}var t;if("script"==="SCRIPT".toLowerCase()){t=function(e){return e.toLowerCase()}}else{t=function(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)})}}var n={lt:"<",gt:">",amp:"&",nbsp:" ",quot:'"',apos:"'"};var r=/^(?:https?|mailto|data)$/i;var i=/^#(\d+)$/;var s=/^#x([0-9A-Fa-f]+)$/;var a=/\0/g;var l=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g;var h=/&/g;var p=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;var d=/</g;var v=/>/g;var m=/\"/g;var g=/\=/g;var w=new RegExp("^\\s*(?:"+("(?:"+"([a-z][a-z-]*)"+("("+"\\s*=\\s*"+("("+'"[^"]*"'+"|'[^']*'"+"|(?=[a-z][a-z-]*\\s*=)"+"|[^>\"'\\s]*"+")")+")")+"?"+")")+"|(/?>)"+"|[\\s\\S][^a-z\\s>]*)","i");var E=new RegExp("^(?:"+"&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);"+"|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>"+"|<(/)?([a-z][a-z0-9]*)"+"|([^<&>]+)"+"|([<&>]))","i");var T=new RegExp("^"+"(?:"+"([^:/?#]+)"+":)?");return{escapeAttrib:y,makeHtmlSanitizer:x,makeSaxParser:S,normalizeRCData:b,sanitize:N,unescapeEntities:c}}(html4);var html_sanitize=html.sanitize;if(typeof window!=="undefined"){window["html"]=html;window["html_sanitize"]=html_sanitize}html4.ATTRIBS["*::style"]=0;html4.ELEMENTS["style"]=0;html4.ATTRIBS["a::target"]=0;html4.ELEMENTS["video"]=0;html4.ATTRIBS["video::src"]=0;html4.ATTRIBS["video::poster"]=0;html4.ATTRIBS["video::controls"]=0;html4.ELEMENTS["audio"]=0;html4.ATTRIBS["audio::src"]=0;html4.ATTRIBS["video::autoplay"]=0;html4.ATTRIBS["video::controls"]=0;var Mustache=typeof module!=="undefined"&&module.exports||{};(function(e){function a(e){return u.test(e)}function p(e){return String(e).replace(/[&<>"'\/]/g,function(e){return h[e]||e})}function d(e,t,n,r){r=r||"<template>";var i=t.split("\n"),s=Math.max(n-3,0),o=Math.min(i.length,n+3),u=i.slice(s,o);var a;for(var f=0,l=u.length;f<l;++f){a=f+s+1;u[f]=(a===n?" >> ":"    ")+u[f]}e.template=t;e.line=n;e.file=r;e.message=[r+":"+n,u.join("\n"),"",e.message].join("\n");return e}function v(e,t,n){if(e==="."){return t[t.length-1]}var r=e.split(".");var i=r.length-1;var s=r[i];var o,u,a=t.length,f,l;while(a){l=t.slice(0);u=t[--a];f=0;while(f<i){u=u[r[f++]];if(u==null){break}l.push(u)}if(u&&typeof u==="object"&&s in u){o=u[s];break}}if(typeof o==="function"){o=o.call(l[l.length-1])}if(o==null){return n}return o}function m(e,t,n,r){var i="";var u=v(e,t);if(r){if(u==null||u===false||s(u)&&u.length===0){i+=n()}}else if(s(u)){o(u,function(e){t.push(e);i+=n();t.pop()})}else if(typeof u==="object"){t.push(u);i+=n();t.pop()}else if(typeof u==="function"){var a=t[t.length-1];var f=function(e){return S(e,a)};i+=u.call(a,n(),f)||""}else if(u){i+=n()}return i}function g(t,n){n=n||{};var r=n.tags||e.tags,i=r[0],s=r[r.length-1];var o=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'];var u=[],l=false,c=false;var h=function(){if(l&&!c&&!n.space){while(u.length){o.splice(u.pop(),1)}}else{u=[]}l=false;c=false};var p=[],v,m,g;var y=function(e){r=f(e).split(/\s+/);m=r[0];g=r[r.length-1]};var b=function(e){o.push('";',v,'\nvar partial = partials["'+f(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')};var w=function(e,r){var i=f(e);if(i===""){throw d(new Error("Section name may not be empty"),t,N,n.file)}p.push({name:i,inverted:r});o.push('";',v,'\nvar name = "'+i+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')};var E=function(e){w(e,true)};var S=function(e){var r=f(e);var i=p.length!=0&&p[p.length-1].name;if(!i||r!=i){throw d(new Error('Section named "'+r+'" was never opened'),t,N,n.file)}var s=p.pop();o.push('";',"\n    return buffer;","\n  };","\n})();");if(s.inverted){o.push("\nbuffer += renderSection(name,stack,callback,true);")}else{o.push("\nbuffer += renderSection(name,stack,callback);")}o.push('\nbuffer += "')};var x=function(e){o.push('";',v,'\nbuffer += lookup("'+f(e)+'",stack,"");','\nbuffer += "')};var T=function(e){o.push('";',v,'\nbuffer += escapeHTML(lookup("'+f(e)+'",stack,""));','\nbuffer += "')};var N=1,C,k;for(var L=0,A=t.length;L<A;++L){if(t.slice(L,L+i.length)===i){L+=i.length;C=t.substr(L,1);v="\nline = "+N+";";m=i;g=s;l=true;switch(C){case"!":L++;k=null;break;case"=":L++;s="="+s;k=y;break;case">":L++;k=b;break;case"#":L++;k=w;break;case"^":L++;k=E;break;case"/":L++;k=S;break;case"{":s="}"+s;case"&":L++;c=true;k=x;break;default:c=true;k=T}var O=t.indexOf(s,L);if(O===-1){throw d(new Error('Tag "'+i+'" was not closed properly'),t,N,n.file)}var M=t.substring(L,O);if(k){k(M)}var _=0;while(~(_=M.indexOf("\n",_))){N++;_++}L=O+s.length-1;i=m;s=g}else{C=t.substr(L,1);switch(C){case'"':case"\\":c=true;o.push("\\"+C);break;case"\r":break;case"\n":u.push(o.length);o.push("\\n");h();N++;break;default:if(a(C)){u.push(o.length)}else{c=true}o.push(C)}}}if(p.length!=0){throw d(new Error('Section "'+p[p.length-1].name+'" was not closed properly'),t,N,n.file)}h();o.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var D=o.join("").replace(/buffer \+= "";\n/g,"");if(n.debug){if(typeof console!="undefined"&&console.log){console.log(D)}else if(typeof print==="function"){print(D)}}return D}function y(e,t){var n="view,partials,stack,lookup,escapeHTML,renderSection,render";var r=g(e,t);var i=new Function(n,r);return function(n,r){r=r||{};var s=[n];try{return i(n,r,s,v,p,m,S)}catch(o){throw d(o.error,e,o.line,t.file)}}}function w(){b={}}function E(e,t){t=t||{};if(t.cache!==false){if(!b[e]){b[e]=y(e,t)}return b[e]}return y(e,t)}function S(e,t,n){return E(e)(t,n)}e.name="mustache.js";e.version="0.5.0-dev";e.tags=["{{","}}"];e.parse=g;e.compile=E;e.render=S;e.clearCache=w;e.to_html=function(e,t,n,r){var i=S(e,t,n);if(typeof r==="function"){r(i)}else{return i}};var t=Object.prototype.toString;var n=Array.isArray;var r=Array.prototype.forEach;var i=String.prototype.trim;var s;if(n){s=n}else{s=function(e){return t.call(e)==="[object Array]"}}var o;if(r){o=function(e,t,n){return r.call(e,t,n)}}else{o=function(e,t,n){for(var r=0,i=e.length;r<i;++r){t.call(n,e[r],r,e)}}}var u=/^\s*$/;var f;if(i){f=function(e){return e==null?"":i.call(e)}}else{var l,c;if(a(" ")){l=/^\s+/;c=/\s+$/}else{l=/^[\s\xA0]+/;c=/[\s\xA0]+$/}f=function(e){return e==null?"":String(e).replace(l,"").replace(c,"")}}var h={"&":"&","<":"<",">":">",'"':""","'":"&#39;","/":"&#x2F;"};var b={}})(Mustache);!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(e,t):this[e]=t()}("reqwest",function(){function handleReadyState(e,t,n){return function(){e&&e[readyState]==4&&(twoHundo.test(e.status)?t(e):n(e))}}function setHeaders(e,t){var n=t.headers||{},r;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&e.setRequestHeader(r,n[r])}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,s=e.jsonpCallback||"callback",o=e.jsonpCallbackName||"reqwest_"+i,u=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),a=r.match(u),f=doc.createElement("script"),l=0;a?a[3]==="?"?r=r.replace(u,"$1="+o):o=a[3]:r=urlappend(r,s+"="+o),win[o]=generalCallback,f.type="text/javascript",f.src=r,f.async=!0,typeof f.onreadystatechange!="undefined"&&(f.event="onclick",f.htmlFor=f.id="_reqwest_"+i),f.onload=f.onreadystatechange=function(){if(f[readyState]&&f[readyState]!=="complete"&&f[readyState]!=="loaded"||l)return!1;f.onload=f.onreadystatechange=null,f.onclick&&f.onclick(),e.success&&e.success(lastValue),lastValue=undefined,head.removeChild(f),l=1},head.appendChild(f)}function getRequest(e,t,n){var r=(e.method||"GET").toUpperCase(),i=typeof e=="string"?e:e.url,s=e.processData!==!1&&e.data&&typeof e.data!="string"?reqwest.toQueryString(e.data):e.data||null,o;return(e.type=="jsonp"||r=="GET")&&s&&(i=urlappend(i,s),s=null),e.type=="jsonp"?handleJsonp(e,t,n,i):(o=xhr(),o.open(r,i,!0),setHeaders(o,e),o.onreadystatechange=handleReadyState(o,t,n),e.before&&e.before(o),o.send(s),o)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function init(o,fn){function complete(e){o.timeout&&clearTimeout(self.timeout),self.timeout=null,o.complete&&o.complete(e)}function success(resp){var r=resp.responseText;if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r}fn(resp),o.success&&o.success(resp),complete(resp)}function error(e,t,n){o.error&&o.error(e,t,n),complete(e)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),this.request=getRequest(o,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n=e.name,r=e.tagName.toLowerCase(),i=function(e){e&&!e.disabled&&t(n,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(e.disabled||!n)return;switch(r){case"input":if(!/reset|button|image|file/i.test(e.type)){var s=/checkbox/i.test(e.type),o=/radio/i.test(e.type),u=e.value;(!s&&!o||e.checked)&&t(n,normalize(s&&u===""?"on":u))}break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one")i(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(var a=0;e.length&&a<e.length;a++)e.options[a].selected&&i(e.options[a])}}function eachFormElement(){var e=this,t,n,r,i=function(t,n){for(var i=0;i<n.length;i++){var s=t[byTag](n[i]);for(r=0;r<s.length;r++)serial(s[r],e)}};for(n=0;n<arguments.length;n++)t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),i(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,lastValue,xmlHttpRequest="XMLHttpRequest",isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},requestedWith:xmlHttpRequest},xhr=win[xmlHttpRequest]?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e){var t="",n,r=encodeURIComponent,i=function(e,n){t+=r(e)+"="+r(n)+"&"};if(isArray(e))for(n=0;e&&n<e.length;n++)i(e[n].name,e[n].value);else for(var s in e){if(!Object.hasOwnProperty.call(e,s))continue;var o=e[s];if(isArray(o))for(n=0;n<o.length;n++)i(s,o[n]);else i(s,e[s])}return t.replace(/&$/,"").replace(/%20/g,"+")},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest});wax=wax||{};wax.attribution=function(){var e={};var t=document.createElement("div");t.className="map-attribution";e.content=function(e){if(typeof e==="undefined")return t.innerHTML;t.innerHTML=wax.u.sanitize(e);return this};e.element=function(){return t};e.init=function(){return this};return e};wax=wax||{};wax.bwdetect=function(e,t){function a(){wax.bw=-1;var e=new Image;e.src=s;var t=true;var i=setTimeout(function(){if(t&&wax.bw==-1){n.bw(0);t=false}},r);e.onload=function(){if(t&&wax.bw==-1){clearTimeout(i);n.bw(1);t=false}}}var n={},r=e.threshold||400,s="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+ +(new Date),o=1,u=e.auto===undefined?true:e.auto;n.bw=function(e){if(!arguments.length)return o;var n=o;if(wax.bwlisteners&&wax.bwlisteners.length)(function(){listeners=wax.bwlisteners;wax.bwlisteners=[];for(i=0;i<listeners;i++){listeners[i](e)}})();wax.bw=e;if(o!=(o=e))t(e)};n.add=function(){if(u)a();return this};if(wax.bw==-1){wax.bwlisteners=wax.bwlisteners||[];wax.bwlisteners.push(n.bw)}else if(wax.bw!==undefined){n.bw(wax.bw)}else{n.add()}return n};wax.formatter=function(x){var formatter={},f;if(x&&typeof x==="string"){try{eval("f = "+x)}catch(e){if(console)console.log(e)}}else if(x&&typeof x==="function"){f=x}else{f=function(){}}formatter.format=function(e,t){try{return wax.u.sanitize(f(e,t))}catch(n){if(console)console.log(n)}};return formatter};wax.gi=function(e,t){function s(e){if(e>=93)e--;if(e>=35)e--;e-=32;return e}t=t||{};var n={},r=t.resolution||4,i=t.tileSize||256;n.grid_tile=function(){return e};n.getKey=function(t,n){if(!(e&&e.grid))return;if(n<0||t<0)return;if(Math.floor(n)>=i||Math.floor(t)>=i)return;return s(e.grid[Math.floor(n/r)].charCodeAt(Math.floor(t/r)))};n.gridFeature=function(t,n){var r=this.getKey(t,n),i=e.keys;if(i&&i[r]&&e.data[i[r]]){return e.data[i[r]]}};n.tileFeature=function(t,n,r){if(!e)return;var i=wax.u.offset(r);feature=this.gridFeature(t-i.left,n-i.top);return feature};return n};wax.gm=function(){function o(e){if(typeof e==="string")e=[e];return function(n){if(!n)return;var r=new RegExp("/(\\d+)\\/(\\d+)\\/(\\d+)\\.[\\w\\._]+");var i=r.exec(n);if(!i)return;return e[parseInt(i[2],10)%e.length].replace(/\{z\}/g,i[1]).replace(/\{x\}/g,i[2]).replace(/\{y\}/g,i[3])}}var e=4,t={},n={},r,i;var s=function(e){if(e){return e.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json")}};n.formatter=function(e){if(!arguments.length)return i;i=wax.formatter(e);return n};n.template=function(e){if(!arguments.length)return i;i=wax.template(e);return n};n.gridUrl=function(e){if(!arguments.length)return s;if(!e){s=function(){return null}}else{s=typeof e==="function"?e:o(e)}return n};n.getGrid=function(t,r){var o=s(t);if(!i||!o)return r(null,null);wax.request.get(o,function(t,n){if(t)return r(t,null);r(null,wax.gi(n,{formatter:i,resolution:e}))});return n};n.tilejson=function(t){if(!arguments.length)return r;if(t.template){n.template(t.template)}else if(t.formatter){n.formatter(t.formatter)}else{i=undefined}n.gridUrl(t.grids);if(t.resolution)e=t.resolution;r=t;return n};return n};wax=wax||{};wax.hash=function(e){function i(){return location.hash.substring(1)}function s(e){var t=window.location;t.replace(t.toString().replace(t.hash||/$/,"#"+e))}function o(t){var n=t.split("/");for(var r=0;r<n.length;r++){n[r]=Number(n[r]);if(isNaN(n[r]))return true}if(n.length<3){return true}else if(n.length==3){e.setCenterZoom(n)}}function u(){var n=e.getCenterZoom();if(t!==n){t=n;s(t)}}function a(e){if(e===t)return;if(o(t=e)){u()}}e=e||{};var t,n={},r=90-1e-8;var f=wax.u.throttle(u,500);n.add=function(){a(i());e.bindChange(f);return n};n.remove=function(){e.unbindChange(f);return n};return n};wax=wax||{};wax.interaction=function(){function d(e){var t=o();for(var n=0;n<t.length;n++){if(e)if(t[n][0]<e.y&&t[n][0]+256>e.y&&t[n][1]<e.x&&t[n][1]+256>e.x)return t[n][2]}return false}function v(){if(r){window.clearTimeout(r);r=null;return true}else{return false}}function m(r){if(n)return;var i=wax.u.eventoffset(r);t.screen_feature(i,function(n){if(n){bean.fire(t,"on",{parent:f(),data:n,formatter:e.formatter().format,e:r})}else{bean.fire(t,"off")}})}function g(e){if(v()){return}n=true;i=wax.u.eventoffset(e);if(e.type==="mousedown"){bean.add(document.body,"click",b);bean.add(document.body,"mouseup",b)}else if(e.type==="touchstart"&&e.touches.length===1){bean.fire(t,"off");bean.add(f(),p)}}function y(){bean.remove(f(),p);n=false}function b(e){var o={},u=wax.u.eventoffset(e);n=false;for(var a in e){o[a]=e[a]}bean.remove(document.body,"mouseup",b);bean.remove(f(),p);if(e.type==="touchend"){t.click(e,i)}else if(Math.round(u.y/s)===Math.round(i.y/s)&&Math.round(u.x/s)===Math.round(i.x/s)){r=window.setTimeout(function(){r=null;t.click(o,u)},300)}return b}var e=wax.gm(),t={},n=false,r=false,i,s=4,o,u,a,f,l,c;var h={mousemove:m,touchstart:g,mousedown:g};var p={touchend:b,touchmove:b,touchcancel:y};t.click=function(n,r){t.screen_feature(r,function(r){if(r)bean.fire(t,"on",{parent:f(),data:r,formatter:e.formatter().format,e:n})})};t.screen_feature=function(t,n){var r=d(t);if(!r)n(null);e.getGrid(r.src,function(e,i){if(e||!i)return n(null);var s=i.tileFeature(t.x,t.y,r);n(s)})};t.attach=function(e){if(!arguments.length)return u;u=e;return t};t.detach=function(e){if(!arguments.length)return a;a=e;return t};t.map=function(e){if(!arguments.length)return l;l=e;if(u)u(l);bean.add(f(),h);bean.add(f(),"touchstart",g);return t};t.grid=function(e){if(!arguments.length)return o;o=e;return t};t.remove=function(e){if(a)a(l);bean.remove(f(),h);bean.fire(t,"remove");return t};t.tilejson=function(n){if(!arguments.length)return e.tilejson();e.tilejson(n);return t};t.formatter=function(){return e.formatter()};t.on=function(e,n){bean.add(t,e,n);return t};t.off=function(e,n){bean.remove(t,e,n);return t};t.gridmanager=function(n){if(!arguments.length)return e;e=n;return t};t.parent=function(e){f=e;return t};return t};var wax=wax||{};wax.legend=function(){var e,t={},n;t.element=function(){return n};t.content=function(n){if(!arguments.length)return e.innerHTML;e.innerHTML=wax.u.sanitize(n);e.style.display="block";if(e.innerHTML===""){e.style.display="none"}return t};t.add=function(){n=document.createElement("div");n.className="map-legends wax-legends";e=n.appendChild(document.createElement("div"));e.className="map-legend wax-legend";e.style.display="none";return t};return t.add()};var wax=wax||{};wax.location=function(){function t(e){if(e.e.type==="mousemove"||!e.e.type){return}else{var t=e.formatter({format:"location"},e.data);if(t){window.location.href=t}}}var e={};e.events=function(){return{on:t}};return e};var wax=wax||{};wax.movetip={};wax.movetip=function(){function o(e){var t=wax.u.eventoffset(e);if(n.height+t.y>r.top+r.height&&r.height>n.height){t.y-=n.height;i.className+=" flip-y"}if(n.width+t.x>r.left+r.width){t.x-=n.width;i.className+=" flip-x"}i.style.left=t.x+"px";i.style.top=t.y+"px"}function u(e){var t=document.createElement("div");t.className="map-tooltip map-tooltip-0";t.innerHTML=e;return t}function a(){if(i){i.parentNode.removeChild(i);i=null}}function f(t){var f;if(e)return;if(t.e.type==="mousemove"||!t.e.type){f=t.formatter({format:"teaser"},t.data);if(!f)return;a();s.style.cursor="pointer";i=document.body.appendChild(u(f))}else{f=t.formatter({format:"teaser"},t.data);if(!f)return;a();var l=document.body.appendChild(u(f));l.className+=" map-popup";var c=l.appendChild(document.createElement("a"));c.href="#close";c.className="close";c.innerHTML="Close";e=true;i=l;n=wax.u.offset(i);r=wax.u.offset(s);o(t.e);bean.add(c,"click touchend",function(n){n.stop();a();e=false})}if(i){n=wax.u.offset(i);r=wax.u.offset(s);o(t.e)}}function l(){s.style.cursor="default";if(!e)a()}var e=false,t={},n,r,i,s;t.parent=function(e){if(!arguments.length)return s;s=e;return t};t.events=function(){return{on:f,off:l}};return t};var wax=wax||{};wax.request={cache:{},locks:{},promises:{},get:function(e,t){if(this.cache[e]){return t(this.cache[e][0],this.cache[e][1])}else{this.promises[e]=this.promises[e]||[];this.promises[e].push(t);if(this.locks[e])return;var n=this;this.locks[e]=true;reqwest({url:e+(~e.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:function(t){n.locks[e]=false;n.cache[e]=[null,t];for(var r=0;r<n.promises[e].length;r++){n.promises[e][r](n.cache[e][0],n.cache[e][1])}},error:function(t){n.locks[e]=false;n.cache[e]=[t,null];for(var r=0;r<n.promises[e].length;r++){n.promises[e][r](n.cache[e][0],n.cache[e][1])}}})}}};wax.template=function(e){var t={};t.format=function(t,n){var r={};for(var i in n){r[i]=n[i]}if(t.format){r["__"+t.format+"__"]=true}return wax.u.sanitize(Mustache.to_html(e,r))};return t};if(!wax)var wax={};wax.tilejson=function(e,t){reqwest({url:e+(~e.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:t,error:t})};var wax=wax||{};wax.tooltip={};wax.tooltip=function(){function u(e){var t=document.createElement("div");t.className="map-tooltip map-tooltip-0 wax-tooltip";t.innerHTML=e;return t}function a(){if(this.parentNode)this.parentNode.removeChild(this)}function f(){var e;while(e=r.pop()){if(t&&s){bean.add(e,s,a);e.className+=" map-fade"}else{if(e.parentNode)e.parentNode.removeChild(e)}}}function l(t){var n;if(t.e.type==="mousemove"||!t.e.type){if(!e){n=t.content||t.formatter({format:"teaser"},t.data);if(!n||n==i)return;f();o.style.cursor="pointer";r.push(o.appendChild(u(n)));i=n}}else{n=t.content||t.formatter({format:"full"},t.data);if(!n){if(t.e.type&&t.e.type.match(/touch/)){n=t.content||t.formatter({format:"teaser"},t.data)}if(!n)return}f();o.style.cursor="pointer";var s=o.appendChild(u(n));s.className+=" map-popup wax-popup";var a=s.appendChild(document.createElement("a"));a.href="#close";a.className="close";a.innerHTML="Close";e=true;r.push(s);bean.add(a,"touchstart mousedown",function(e){e.stop()});bean.add(a,"click touchend",function(n){n.stop();f();e=false})}}function c(){o.style.cursor="default";i=null;if(!e)f()}var e=false,t=false,n={},r=[],i,s,o;if(document.body.style["-webkit-transition"]!==undefined){s="webkitTransitionEnd"}else if(document.body.style.MozTransition!==undefined){s="transitionend"}n.parent=function(e){if(!arguments.length)return o;o=e;return n};n.animate=function(e){if(!arguments.length)return t;t=e;return n};n.events=function(){return{on:l,off:c}};return n};var wax=wax||{};wax.u={offset:function(e){var t=e.offsetWidth||parseInt(e.style.width,10),n=e.offsetHeight||parseInt(e.style.height,10),r=document.body,i=0,s=0;var o=function(e){if(e===r||e===document.documentElement)return;i+=e.offsetTop;s+=e.offsetLeft;var t=e.style.transform||e.style.WebkitTransform||e.style.OTransform||e.style.MozTransform||e.style.msTransform;if(t){var n;if(n=t.match(/translate\((.+)px, (.+)px\)/)){i+=parseInt(n[2],10);s+=parseInt(n[1],10)}else if(n=t.match(/translate3d\((.+)px, (.+)px, (.+)px\)/)){i+=parseInt(n[2],10);s+=parseInt(n[1],10)}else if(n=t.match(/matrix3d\(([\-\d,\s]+)\)/)){var o=n[1].split(",");i+=parseInt(o[13],10);s+=parseInt(o[12],10)}else if(n=t.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/)){i+=parseInt(n[2],10);s+=parseInt(n[1],10)}}};o(e);try{while(e=e.offsetParent){o(e)}}catch(u){}i+=r.offsetTop;s+=r.offsetLeft;i+=r.parentNode.offsetTop;s+=r.parentNode.offsetLeft;var a=document.defaultView?window.getComputedStyle(r.parentNode,null):r.parentNode.currentStyle;if(r.parentNode.offsetTop!==parseInt(a.marginTop,10)&&!isNaN(parseInt(a.marginTop,10))){i+=parseInt(a.marginTop,10);s+=parseInt(a.marginLeft,10)}return{top:i,left:s,height:n,width:t}},$:function(e){return typeof e==="string"?document.getElementById(e):e},eventoffset:function(e){var t=0;var n=0;if(!e){e=window.event}if(e.pageX||e.pageY){return{x:e.pageX,y:e.pageY}}else if(e.clientX||e.clientY){return{x:e.clientX,y:e.clientY}}else if(e.touches&&e.touches.length===1){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}},limit:function(e,t,n){var r;return function(){var i=this,s=arguments;var o=function(){r=null;e.apply(i,s)};if(n)clearTimeout(r);if(n||!r)r=setTimeout(o,t)}},throttle:function(e,t){return this.limit(e,t,false)},sanitize:function(e){function t(e){if(/^(https?:\/\/|data:image)/.test(e)){return e}}function n(e){return e}if(!e)return"";return html_sanitize(e,t,n)}};wax=wax||{};wax.g=wax.g||{};wax.g.attribution=function(e,t){t=t||{};var n,r={};r.element=function(){return n.element()};r.appendTo=function(e){wax.u.$(e).appendChild(n.element());return this};r.init=function(){n=wax.attribution();n.content(t.attribution);n.element().className="map-attribution map-g";return this};return r.init()};wax=wax||{};wax.g=wax.g||{};wax.g.bwdetect=function(e,t){t=t||{};var n=t.png||".png128",r=t.jpg||".jpg70";if(!e.mapTypes["mb-low"]){var i=e.mapTypes.mb;var s={tiles:[],scheme:i.options.scheme,blankImage:i.options.blankImage,minzoom:i.minZoom,maxzoom:i.maxZoom,name:i.name,description:i.description};for(var o=0;o<i.options.tiles.length;o++){s.tiles.push(i.options.tiles[o].replace(".png",n).replace(".jpg",r))}m.mapTypes.set("mb-low",new wax.g.connector(s))}return wax.bwdetect(t,function(t){e.setMapTypeId(t?"mb":"mb-low")})};wax=wax||{};wax.g=wax.g||{};wax.g.hash=function(e){return wax.hash({getCenterZoom:function(){var t=e.getCenter(),n=e.getZoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return[n.toFixed(2),t.lat().toFixed(r),t.lng().toFixed(r)].join("/")},setCenterZoom:function(n){e.setCenter(new google.maps.LatLng(n[1],n[2]));e.setZoom(n[0])},bindChange:function(t){google.maps.event.addListener(e,"idle",t)},unbindChange:function(t){google.maps.event.removeListener(e,"idle",t)}})};wax=wax||{};wax.g=wax.g||{};wax.g.interaction=function(){function r(){e=true}function i(){if(!e&&t){return t}else{t=[];var r=n.getZoom();var i=wax.u.offset(n.getDiv());var s=function(e){if(!e.interactive)return;for(var n in e.cache){if(n.split("/")[0]!=r)continue;var i=wax.u.offset(e.cache[n]);t.push([i.top,i.left,e.cache[n]])}};for(var o in n.mapTypes)s(n.mapTypes[o]);n.overlayMapTypes.forEach(s)}return t}function s(e){if(!arguments.length)return n;n=e;google.maps.event.addListener(n,"tileloaded",r);google.maps.event.addListener(n,"idle",r)}function o(e){google.maps.event.clearListeners(n,"tileloaded");google.maps.event.clearListeners(n,"idle")}var e=false,t,n;return wax.interaction().attach(s).detach(o).parent(function(){return n.getDiv()}).grid(i)};wax=wax||{};wax.g=wax.g||{};wax.g.legend=function(e,t){t=t||{};var n,r={};r.add=function(){n=wax.legend().content(t.legend||"");return r};r.element=function(){return n.element()};r.appendTo=function(e){wax.u.$(e).appendChild(n.element());return r};return r.add()};var wax=wax||{};wax.g=wax.g||{};wax.g.connector=function(e){e=e||{};this.options={tiles:e.tiles,scheme:e.scheme||"xyz",blankImage:e.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};this.opacity=e.opacity;this.minZoom=e.minzoom||0;this.maxZoom=e.maxzoom||22;this.name=e.name||"";this.description=e.description||"";this.interactive=true;this.tileSize=new google.maps.Size(256,256);this.cache={}};wax.g.connector.prototype.getTile=function(e,t,n){var r=t+"/"+e.x+"/"+e.y;if(!this.cache[r]){var i=this.cache[r]=new Image(256,256);this.cache[r].src=this.getTileUrl(e,t);this.cache[r].setAttribute("gTileKey",r);this.cache[r].setAttribute("style","opacity: "+this.opacity+"; filter: alpha(opacity="+this.opacity*100+");");this.cache[r].onerror=function(){i.style.display="none"}}return this.cache[r]};wax.g.connector.prototype.releaseTile=function(e){var t=e.getAttribute("gTileKey");if(this.cache[t])delete this.cache[t];if(e.parentNode)e.parentNode.removeChild(e)};wax.g.connector.prototype.getTileUrl=function(e,t){var n=Math.pow(2,t),r=this.options.scheme==="tms"?n-1-e.y:e.y,i=e.x%n;i=i<0?e.x%n+n:i;if(r<0)return this.options.blankImage;return this.options.tiles[parseInt(i+r,10)%this.options.tiles.length].replace("{z}",t).replace("{x}",i).replace("{y}",r)}